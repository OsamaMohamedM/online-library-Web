<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Online Library</title>
  <link rel="stylesheet" href="main_user.css">
</head>
<script>
   const urlParams = new URLSearchParams(window.location.search);
    const user = urlParams.get('user');
</script>

<body>

  <nav class="nav">
    <a href="../admin 2/Admin-profile.html" class="profile">User Profile</a>
    <a href="borrowed_books.html" class="Borrowed">Borrowed Books</a>
    <a href="BorrowBook.html" class="Borrow">Borrow Books</a>
    <a href="../login/sginout.html" class="signout">Sign Out</a>
  </nav>

  <div class="Search">
    <form action="#" id="searchForm">
      <input type="text" placeholder="Search by author or book" class="fo" id="searchInput">
      <button type="button" onclick="searchBooks()">Search</button>
    </form>
  </div>

  <div id="content">
    <h2>available books</h2>
    <div class="row1">

      <div class="column1">
        <div class="book-details">

        </div>
      </div>

      <div class="column2">
        <div class="book-details">

        </div>
      </div>

      <div class="column3">
        <div class="book-details">

        </div>
      </div>

      <div class="column4">
        <div class="book-details">

        </div>
      </div>

      <div class="column5">
        <div class="book-details">
        </div>
      </div>

    </div>


    <div class="row2">

      <div class="column1">
        <div class="book-details">

        </div>
      </div>

      <div class="column2">
        <div class="book-details">

        </div>
      </div>

      <div class="column3">
        <div class="book-details">

        </div>
      </div>

      <div class="column4">
        <div class="book-details">

        </div>
      </div>

      <div class="column5">
        <div class="book-details">
        </div>
      </div>
    </div>
    <div class="row3">

      <div class="column1">
        <div class="book-details">

        </div>
      </div>

      <div class="column2">
        <div class="book-details">

        </div>
      </div>

      <div class="column3">
        <div class="book-details">

        </div>
      </div>

      <div class="column4">
        <div class="book-details">

        </div>
      </div>

      <div class="column5">
        <div class="book-details">
        </div>
      </div>
    </div>
    <div class="row4">

      <div class="column1">
        <div class="book-details">

        </div>
      </div>

      <div class="column2">
        <div class="book-details">

        </div>
      </div>

      <div class="column3">
        <div class="book-details">

        </div>
      </div>

      <div class="column4">
        <div class="book-details">

        </div>
      </div>

      <div class="column5">
        <div class="book-details">
        </div>
      </div>
    </div>

  </div>
  <br><br><br>
  <div class="footer">
    <a href="#">Terms of Use</a> &nbsp; &nbsp;
    <a href="#">Privacy Policy</a> &nbsp; &nbsp;
    <a href="#">About the Library</a> &nbsp; &nbsp;
    <a href="#">Contact Us</a> &nbsp; &nbsp;
    <a href="#">Donate to the Library</a> &nbsp; &nbsp;
  </div>

  <script>
   
   let book
    =
    [
        {
            "id": "100",
            "title": "the art",
            "author": "Osama",
            "year": 2010,
            "imgLink": "./img1.jpg",
            "lan": "Arabic",
            "NumberPage": 100,
            "price":100,
            "description": "Description of Book 1"
          },
        {
            "id": "101",
            "title": "my book cover",
            "author": "Hadeel",
            "year": 2010,
            "imgLink": "./img2.jpeg",
            "lan": "Arabic",
            "NumberPage": 100,
            "price":100,
            "description": "Description of Book 1"
          },
        {
            "id": "102",
            "title": "assassin of reality",
            "author": "joe",
            "year": 2010,
            "imgLink": "./img4.png",
            "lan": "Arabic",
            "NumberPage": 100,
            "price":100,
            "description": "Description of Book 1"
          },
        {
            "id": "103",
            "title": "patrick rothfuss",
            "author": "Mohamed",
            "year": 2010,
            "imgLink": "./img6.jpeg",
            "lan": "Arabic",
            "NumberPage": 100,
            "price":100,
            "description": "Description of Book 1"
          },
        {
            "id": "104",
            "title": "harry potter",
            "author": "osama",
            "year": 2010,
            "imgLink": "./img6.jpg",
            "lan": "Arabic",
            "NumberPage": 100,
            "price":100,
            "description": "Description of Book 1"
          },
        {
            "id": "105",
            "title": "girl in the tower",
            "author": "joe",
            "year": 2010,
            "imgLink": "./img7jpg.jpg",
            "lan": "Arabic",
            "NumberPage": 100,
            "price":100,
            "description": "Description of Book 1"
          },
        {
            "id": "106",
            "title": "patrick rothfuss",
            "author": "Hadeel",
            "year": 2010,
            "imgLink": "./img8.jpeg",
            "lan": "Arabic",
            "NumberPage": 100,
            "price":100,
            "description": "Description of Book 1"
          },
         
        {
            "id": "107",
            "title": "mad ship",
            "author": "osama",
            "year": 2010,
            "imgLink": "./img9.jpeg",
            "lan": "Arabic",
            "NumberPage": 100,
            "price":100,
            "description": "Description of Book 1"
          },
        {
            "id": "108",
            "title": "before your memory fades",
            "author": "joe",
            "year": 2010,
            "imgLink": "./img10.jpeg",
            "lan": "Arabic",
            "NumberPage": 100,
            "price":100,
            "description": "Description of Book 1"
          },
        {
            "id": "109",
            "title": "the wildest sun",
            "author": "Hadeel",
            "year": 2010,
            "imgLink": "./img11.jpeg",
            "lan": "Arabic",
            "NumberPage": 100,
            "price":100,
            "description": "Description of Book 1"
          },
         
    ]


    localStorage.setItem('books',JSON.stringify(book));
    const books = JSON.parse(localStorage.getItem('books'));
    console.log(books);
    function populateBooks() {
      const columns = document.querySelectorAll('.book-details');
      columns.forEach((column, index) => {
        if (index >= books.length) {
          column.parentElement.style.display = 'none';
        } else {
          const book = books[index];
          column.innerHTML = `
                  <p class="ID">Book ID: ${book.id}</p>
                  <div><a href="bookDetails.html?id=${book.id}"><img src="${book.imgLink}" height="280px"></a></div>
                  <p>${book.price}$</p>
                  <a href="../coverpage.pdf" download="cover.pdf">
                    <button>Download PDF</button>
                    </a>
                    `;
        }
      });
    }
    populateBooks();


    function displayBooks(searchResults) {
      const columns = document.querySelectorAll('.book-details');
      columns.forEach((column, index) => {
        if (index >= searchResults.length) {
          console.log((searchResults));
          column.parentElement.style.display = 'none';
        } else {
          const book = searchResults[index];
          column.innerHTML = `
                    <p class="ID">Book ID: ${book.id}</p>
                    <div><a href="bookDetails.html?id=${book.id}"><img src="${book.imgLink}" height="280px"></a></div>
                    <p>${book.price}$</p>
                    <a href="../coverpage.pdf" download="cover.pdf">
                      <button>Download PDF</button>
                      </a>
                  `;
        }
      });
    }

    function searchBooks() {

      const item = document.getElementById('searchInput').value.toLowerCase();
      const result = books.filter(book =>
        book.title.toLowerCase().includes(item) || book.author.toLowerCase().includes(item)
      );

      if (result.length > 0) {
        displayBooks(result);
      } else {
        const contentDiv = document.getElementById('content');
        contentDiv.innerHTML = '<h2>No results found.</h2>';
      }
    }
   

  </script>
</body>

</html>